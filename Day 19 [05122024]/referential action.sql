USE CODEGNAN;
CREATE TABLE CUSTOMERS(
	CID INT PRIMARY KEY,
    CNAME VARCHAR(100),
    CMOBILE VARCHAR(13)
);
CREATE TABLE ORDERSS(
	OID INT,
    CID INT,
    ONAME VARCHAR(20),
    FOREIGN KEY (CID) REFERENCES CUSTOMERS(CID)
);
INSERT INTO CUSTOMERS VALUES (101,"A",123),(102,"B",456),(103,"C",789);
INSERT INTO CUSTOMERS VALUES (104,"D",5467);
INSERT INTO ORDERSS VALUES (1,101,"O1");
INSERT INTO ORDERSS VALUES (2,102,"O2");
INSERT INTO ORDERSS VALUES (1,103,"O1");
SELECT * FROM CUSTOMERS;
SELECT * FROM ORDERSS;
DELETE FROM CUSTOMERS WHERE CID=104;

-- CASCADE

CREATE TABLE CUSTOMERS1(
	CID INT PRIMARY KEY,
    CNAME VARCHAR(100),
    CMOBILE VARCHAR(13)
);
CREATE TABLE ORDERSS1(
	OID INT,
    CID INT,
    ONAME VARCHAR(20),
    FOREIGN KEY (CID) REFERENCES CUSTOMERS1(CID) ON DELETE CASCADE ON UPDATE CASCADE
);
INSERT INTO CUSTOMERS1 VALUES (101,"A",123),(102,"B",456),(103,"C",789);
INSERT INTO CUSTOMERS1 VALUES (104,"D",5467);
INSERT INTO ORDERSS1 VALUES (1,101,"O1");
INSERT INTO ORDERSS1 VALUES (2,102,"O2");
INSERT INTO ORDERSS1 VALUES (1,103,"O1");
SELECT * FROM CUSTOMERS1;
SELECT * FROM ORDERSS1;
DELETE FROM CUSTOMERS1 WHERE CID=101;
DELETE FROM CUSTOMERS1 WHERE CID=103;
SET SQL_SAFE_UPDATES = 0;
UPDATE CUSTOMERS1 SET CID=1002 WHERE CNAME = 'B';

-- SET NULL

CREATE TABLE CUSTOMERS3(
	CID INT PRIMARY KEY,
    CNAME VARCHAR(100),
    CMOBILE VARCHAR(13)
);
CREATE TABLE ORDERSS3(
	OID INT,
    CID INT,
    ONAME VARCHAR(20),
    FOREIGN KEY (CID) REFERENCES CUSTOMERS3(CID) ON DELETE SET NULL ON UPDATE SET NULL
);
INSERT INTO CUSTOMERS3 VALUES (101,"A",123),(102,"B",456),(103,"C",789);
INSERT INTO CUSTOMERS3 VALUES (104,"D",5467);
INSERT INTO ORDERSS3 VALUES (1,101,"O1");
INSERT INTO ORDERSS3 VALUES (2,102,"O2");
INSERT INTO ORDERSS3 VALUES (1,103,"O1");
SELECT * FROM CUSTOMERS3;
SELECT * FROM ORDERSS3;

-- RESTRICT

CREATE TABLE CUSTOMERS4(
	CID INT PRIMARY KEY,
    CNAME VARCHAR(100),
    CMOBILE VARCHAR(13)
);
CREATE TABLE ORDERSS4(
	OID INT,
    CID INT,
    ONAME VARCHAR(20),
    FOREIGN KEY (CID) REFERENCES CUSTOMERS4(CID) ON DELETE RESTRICT ON UPDATE RESTRICT
);
INSERT INTO CUSTOMERS4 VALUES (101,"A",123),(102,"B",456),(103,"C",789);
INSERT INTO CUSTOMERS4 VALUES (104,"D",5467);
INSERT INTO ORDERSS4 VALUES (1,101,"O1");
INSERT INTO ORDERSS4 VALUES (2,102,"O2");
INSERT INTO ORDERSS4 VALUES (1,103,"O1");
SELECT * FROM CUSTOMERS4;
SELECT * FROM ORDERSS4;
DELETE FROM CUSTOMERS4 WHERE CID=101;
SET SQL_SAFE_UPDATES = 0;
UPDATE CUSTOMERS1 SET CID=1002 WHERE CNAME = 'B';
DELETE FROM CUSTOMERS3 WHERE CID=101;
SET SQL_SAFE_UPDATES = 0;
UPDATE CUSTOMERS3 SET CID=1002 WHERE CNAME = 'B';